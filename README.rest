=========
seqmagick
=========

Motivation
==========

We often have to convert between sequence formats and do little tasks on them, and it's not worth writing scripts for that.
Seqmagick is a kickass little utility to expose the file format conversion in Biopython in a convenient way.
Instead of having a big mess of scripts, there is one that takes arguments.

The code
========

A command line tool to do little sequence manipulations in the spirit of imagemagick_.

In particular, the format conversion specification happens by suffix. 
Writing::

  seqmagick convert x.fasta y.phy

converts the FASTA file to phylip format. Of course.

In general the interface is in the format::

  seqmagick <cmd>

with <cmd> being one of:

check
  check integrity of a file. Not yet implemented.

convert
  convert a b will convert a to b

info
  describe a sequence file

mogrify
  mogrify modifies in place

muscle
  create an alignment using muscle.


The real action for these commands happens in the options.
These can be stacked on top of one another.

  --cut start:end       Start and end positions for cutting sequences, :
                        separated. Includes last item.
  --dashgap             Change . and : into - for all sequences
  --deduplicateseqs     Remove any duplicate sequences by sequence content,
                        keep the first instance seen
  --deduplicatetaxa     Remove any duplicate sequences by ID, keep the first
                        instance seen
  --ungap               Remove gaps in the sequence alignment
  --firstname           Take only the first whitespace-delimited word as the
                        name of the sequence
  --head N              Trim down to top N sequences
  --pattern-include regex
                        Filter the sequences by regular expression in name
  --pattern-exclude regex
                        Filter out sequences by regular expression in name
  --linewrap LINEWRAP   Adjust line wrap for sequence strings. Useful for
                        viewing an alignment when setting to 0 which has no
                        line breaks. Only fasta files are supported.
  --lower               Translate the sequences to lower case
  --reverse             Reverse the order of sites in sequences
  --reversecomplement   Convert sequences into reverse complements
  --sort {length-asc,length-desc,name-asc,name-desc}
                        Perform sorting by length or name, ascending or
                        descending. ASCII sorting is performed for names
  --striprange          Strip ranges from sequences IDs, matching </x-y>
  --squeeze             Remove any gaps that are present in the same position
                        across all sequences in an alignment
  --tail N              Trim down to bottom N sequences
  --translate destination_type
                        Translate between amino acids and nucleotides, use
                        "aa" or "nuc" as destination type
  --upper               Translate the sequences to upper case
  --tmp TMP_DIR         Temporary directory for working file. Default is /tmp.
  --debug               Enable debug output
  --verbose             Enable verbose output


We can specify some short options later.

To refine or implement:

--translate     if it's nucleotide, take to AA, and vice versa
--wrap          interleave a phylip file or wrap a fasta file

Other commands:

help
  seqmagick help <action>
  e.g. seqmagick help convert

info
  Describe sequence files, with different output options. 

muscle
  Create an alignment using Muscle.

check
  check integrity of files
  should take --DNA --AA arguments to check if the file is one of these types
  (or perhaps an alphabet)
  make sure that you are using IUPAC characters for AA or Nuc

.. _imagemagick: http://www.imagemagick.org/script/command-line-tools.php

